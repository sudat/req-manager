<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>変更要求を起票 - 要件管理ツール</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../shared/tailwind-style.js"></script>
</head>
<body>
    <!-- サイドバー -->
    <aside class="sidebar" id="sidebar"></aside>

    <!-- メインコンテンツ -->
    <div class="main-wrapper">
        <div class="container">
            <!-- 戻るリンク -->
            <a href="ticket_list.html" class="back-link">
                <svg class="back-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5"></path>
                    <path d="M12 19l-7-7 7-7"></path>
                </svg>
                変更要求一覧に戻る
            </a>

            <!-- ページタイトル -->
            <h1 class="page-title">変更要求を起票</h1>

            <!-- フォーム -->
            <form class="form-card">
                <!-- タイトル -->
                <div class="form-group">
                    <label class="form-label">
                        タイトル<span class="required-mark">*</span>
                    </label>
                    <input
                        type="text"
                        class="form-input"
                        placeholder="例: インボイス制度対応"
                        required
                    >
                </div>

                <!-- 背景・目的 -->
                <div class="form-group">
                    <label class="form-label">
                        背景・目的<span class="required-mark">*</span>
                    </label>
                    <textarea
                        class="form-textarea"
                        placeholder="変更要求の背景や目的を記述してください"
                        required
                    ></textarea>
                </div>

                <!-- 影響業務 -->
                <div class="form-group">
                    <label class="form-label">影響業務</label>
                    <div class="button-group">
                        <button type="button" class="select-button">請求業務</button>
                        <button type="button" class="select-button">経理業務</button>
                        <button type="button" class="select-button">購買業務</button>
                        <button type="button" class="select-button">在庫管理業務</button>
                        <button type="button" class="select-button">販売業務</button>
                        <button type="button" class="select-button">経費精算業務</button>
                    </div>
                    <div class="form-hint">影響を受ける業務を選択してください。後からAI影響分析で自動抽出も可能です。</div>
                </div>

                <!-- 影響領域 -->
                <div class="form-group">
                    <label class="form-label">影響領域</label>
                    <div class="button-group">
                        <button type="button" class="badge-button fi">FI</button>
                        <button type="button" class="badge-button sd">SD</button>
                        <button type="button" class="badge-button mm">MM</button>
                        <button type="button" class="badge-button hr">HR</button>
                    </div>
                    <div class="form-hint">影響を受ける領域を選択してください。後からAI影響分析で自動抽出も可能です。</div>
                </div>

                <!-- AI影響分析情報 -->
                <div class="info-box">
                    <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                    <div class="info-content">
                        <div class="info-title">AI影響分析について</div>
                        <div class="info-text">起票後、変更要求詳細画面で「AI影響分析」を実行すると、影響を受ける業務・要件・概念を自動的に提案します。</div>
                    </div>
                </div>

                <!-- アクション -->
                <div class="form-actions">
                    <a href="ticket_list.html" class="btn-cancel">キャンセル</a>
                    <button type="submit" class="btn-submit">起票</button>
                </div>
            </form>
        </div>
    </div>

    <script src="../shared/sidebar.js"></script>
    <script>
        // 選択ボタンのトグル機能
        document.querySelectorAll('.select-button').forEach(button => {
            button.addEventListener('click', function() {
                this.classList.toggle('selected');
            });
        });

        document.querySelectorAll('.badge-button').forEach(button => {
            button.addEventListener('click', function() {
                this.classList.toggle('selected');
            });
        });

        // フォーム送信のハンドリング（デモ用）
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('変更要求を起票しました（デモ）');
            window.location.href = 'ticket_list.html';
        });
    </script>
</body>
</html>
