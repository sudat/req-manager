# リファクタリング影響確認 E2Eテスト計画

## 目的
リファクタリングによる機能への影響有無を確認するため、Playwright MCPを使用して対話的に主要フローをテストする。

## テスト方式
- **Playwright MCP** によるブラウザ操作
- **スクリーンショット** による結果確認
- テストコードは作成せず、対話的な実行と検証

## 前提条件
- アプリケーションが `http://localhost:3000` で実行中であること
- Playwright MCP ツールが利用可能であること

## テストシナリオ

### シナリオ1: 業務タスク詳細・業務要件の照会
1. `/business` にアクセス
2. 業務一覧が表示されることを確認
3. 任意の業務を選択（例: 債権管理 BIZ-001）
4. `/business/BIZ-001/tasks` でタスク一覧が表示されることを確認
5. 任意のタスクを選択（例: 与信管理 TASK-001）
6. `/business/BIZ-001/tasks/TASK-001` でタスク詳細が表示されることを確認
7. 業務要件カードが正しく表示されていることを確認

### シナリオ2: 業務タスクの追加
1. `/business/manual-add` にアクセス
2. タスクフォームが表示されることを確認
3. 必須項目を入力：
   - 業務領域選択
   - タスク名
   - 概要
4. 保存ボタンが有効になることを確認
5. （実際の保存はスキップ、UIの動作確認のみ）

### シナリオ3: システム機能の照会・追加
1. `/system-domains` にアクセス
2. システムドメイン一覧が表示されることを確認
3. 任意のドメインを選択
4. `/system-domains/{id}/functions` でシステム機能一覧が表示されることを確認
5. `/system-domains/{id}/functions/create` にアクセス
6. システム機能作成フォームが表示されることを確認
7. 必須項目の入力フィールドが存在することを確認

### シナリオ4: システム要件の照会・追加
1. システム機能一覧から任意の機能を選択
2. システム要件詳細ページ `/system-domains/{id}/{srfId}` が表示されることを確認
3. システム要件セクションが正しく表示されていることを確認
4. 編集ページ `/system-domains/{id}/{srfId}/edit` にアクセス
5. 編集フォームが表示されることを確認

## 使用するPlaywright MCPツール

| ツール | 用途 |
|--------|------|
| `mcp__playwright__browser_navigate` | ページ遷移 |
| `mcp__playwright__browser_take_screenshot` | スクリーンショット撮影 |
| `mcp__playwright__browser_click` | 要素クリック |
| `mcp__playwright__browser_snapshot` | DOM構造確認 |
| `mcp__playwright__browser_wait_for` | 要素待機 |

## 実行フロー

1. **起動確認**: localhost:3000 でアプリが起動しているか確認
2. **シナリオ1実行**: 業務タスク詳細・業務要件照会
3. **シナリオ2実行**: 業務タスク追加
4. **シナリオ3実行**: システム機能照会・追加
5. **シナリオ4実行**: システム要件照会・追加
6. **結果まとめ**: 発見した問題の報告

## 検証ポイント

### UI表示
- [ ] ページがエラーなくレンダリングされる
- [ ] データが正しく表示される
- [ ] レイアウトが崩れていない

### インタラクション
- [ ] リンク・ボタンがクリック可能
- [ ] フォーム入力が可能
- [ ] ドロップダウン・選択肢が機能する

### データ整合性
- [ ] 業務要件とタスクの関連が正しい
- [ ] システム要件とシステム機能の関連が正しい
- [ ] モックデータが正しく読み込まれている

## 期待される結果
- すべてのページがエラーなく表示される
- リファクタリング前と同じUI/UXが維持されている
- データの表示・入力が正常に動作する

## 問題が発見された場合
- 該当箇所のスクリーンショットを保存
- エラーメッセージを記録
- 期待される動作と実際の動作の差異を報告
